<!DOCTYPE html>
<html><head><title>Hey there</title><meta charset="utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"><link href="/reveal/css/reveal.css" rel="stylesheet" type="text/css"><link href="/reveal/css/theme/moon.css" rel="stylesheet" type="text/css"><link href="/style.css" rel="stylesheet" type="text/css"></head><body><div class="reveal"><div class="slides"><section><img class="light-bulb" src="/images/light-bulb.jpg"></section><section><h1>Idempotency</h1><q>"...the property of certain operations in mathematics and computer science, that can be applied multiple times without changing the result beyond the initial application."</q> - Some person on Wikipedia</section><section><h1>Idempotency</h1><q>"because it's easier to just try again, than to figure out what went wrong"</q> - Me</section><section><section><h2>So hot right now</h2><img src="/images/so-hot.jpg"></section><section><h3>Useful everywhere</h3><p>user interfaces</p><p>databases</p><p>configuration management</p><p>HTTP/REST</p><p>messaging</p><p>orchestration/scheduling</p><p>light switches</p></section></section><section><section><h2>User interfaces</h2><p>JavaScript ecosystem is embracing unidirectional data flow</p><p>idempotent rendering</p></section><section><h3>Reactjs</h3><p>describes views declaratively instead of imperatively</p><p>uses virtual-DOM diffing and reconciliation to achieve idempotency</p></section></section><section><section><h2>Database migrations</h2><p>safe to reapply</p><p>allows apps to migrate on startup</p></section><section><h3>The migrations table</h3><p>keeps track of all currently applied migrations</p><p>is a no-op when there are new migrations to apply</p></section></section><section><section><h2>Configuration management</h2><p>no danger in rerunning the system if something goes wrong</p><p>can naturally even out inconsistencies</p></section><section><h3>Puppet</h3><p>puppet modules declare how system work</p><p>agents blindly re-apply configuration every half hour</p></section></section><section><section><h2>HTTP/REST</h2><p>difference between PUT and POST</p></section><section><h3>Create/update</h3><p>creating a new resource is generally not idempotent</p><code>POST /things</code><p>updating an existing resource is</p><code>PUT /things/1</code></section><section><h3>POST</h3><p>usually, no unique ID is sent during creating</p><p>server can't figure out if resource has already been created</p></section><section><h3>PUT</h3><p>declarative updates to an existing resource</p><p>server knows what resource is being referred to</p><p>it's easy to tell if something has changed or not</p></section></section><section><section><h2>Messaging</h2><p>works great with at-least-once delivery guarantees</p></section><section><h3>Kafka and NSQ</h3><p>exactly-once semantics are expensive</p><p>message bus can be more efficient when using at-least-once semantics</p><p>idempotent messages can easily be retried in case of delivery failure</p></section></section><section><section><h2>Orchestration/scheduling</h2><p>works well with self-healing systems</p></section><section><h2>CF HM9000 and K8S replication controllers</h2><p>what apps are currently running?</p><p>what apps do I expect to be running?</p><p>what can I do to reconcile the differences?</p></section></section><section><section><h2>But, how?</h2></section><section><h3>Say what you want</h3><p class="fragment">instead of saying how to get there</p></section><section><h3>Be declarative</h3><p>find and use naturally idempotent operations</p><p>intelligently reconcile declared and actual state</p></section></section><section><section><h2>Getting technical</h2></section><section><h3>Purity</h3><p><code>f(x) == f(x)</code></p><h3>Idempotency</h3><p><code>f(f(x)) == f(x)</code></p></section><section><h3>Functional programming</h3><p>immutable data</p><p>pure functions</p><p>helpful but not necessary</p></section></section><section><h2>Build robust, performant systems</h2><p>operations can be safely retried</p><p>interruptions are recoverable</p><p>aggressively cache results, since they are predictable</p></section><section><h1>Thank you!</h1></section></div></div></body><script src="/reveal/js/reveal.js" type="text/javascript"></script><script src="/app.js" type="text/javascript"></script></html>
